<?php

namespace frontend\controllers;

use common\models\goods\mongodb\Goods;
use common\models\goods\mongodb\Attr;
use common\service\goods\GoodsService;
use Qiniu\json_decode;
use Yii;

/**
 * goods controller
 */
class GoodsController extends BaseController
{
    public function init()
    {
        parent::init(); // TODO: Change the autogenerated stub
    }

    
    public function actionList()
    {
    	return $this->render('list');
    }
    /**
     * Displays homepage.
     * @return mixed
     */
    public function actionDetail()
    {	
    	$id = Yii::$app->request->get('id');
        return $this->render('detail',['id' => $id]);
    }

    
    public function actionGetlist()
    {
    	if(Yii::$app->request->isAjax)
    	{
    		$size = Yii::$app->request->post('size');
    		$page = Yii::$app->request->post('page');
    		$data = GoodsService::getList($page, $size);
    		if($page ==1)
    		{
    			$count = GoodsService::getCount();
    			return ['status' => 0,'data' =>$data,'count' => $count];
    		}
    		return ['status' => 0,'data' =>GoodsService::getList($page, $size)];
    	}
    }
    
    
    
    public function actionGetdetail()
    {	
    	$this->layout = false;
    	$id = (string)Yii::$app->request->get('id');
    	$data = GoodsService::getOne($id);
    	return ['data' =>$data,'status' =>0];
    }
    
    
    

}